<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.yedam.emp.service.impl.DeptMapper">
	<select id="getSearchDept" parameterType="dept"
		resultType="dept">
		SELECT *
		FROM DEPARTMENTS
		ORDER BY DEPARTMENT_ID
		<where>
			<if test="department_name != null and department_name = ''">
				DEPARTMENT_NAME = #{department_name}
			</if>
			<if test="manager_id != null and manager_id = ''">
				AND MANAGER_ID = #{manager_id}
			</if>
		</where>
	</select>
	
	<select id="getDept" parameterType="dept" resultType="dept">
		SELECT E.LAST_NAME, D.DEPARTMENT_NAME, L.CITY
		FROM EMPLOYEES E
		FULL OUTER JOIN DEPARTMENTS D
		ON(E.DEPARTMENT_ID = D.DEPARTMENT_ID)
		FULL OUTER JOIN LOCATIONS L
		ON(D.LOCATION_ID = L.LOCATION_ID)
		WHERE D.MANAGER_ID = #{manager_id}
	</select>
</mapper>